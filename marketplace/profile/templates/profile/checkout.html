{% extends "store/base.html" %}
{% block content %}

<style>
    #checkoutMethods {
        background: #fff;
        border-radius: 2px;
        display: inline-block;
        max-height: 700px;
        margin: 1rem;
        position: relative;
        width: 700px;
        box-shadow: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);

    }
</style>

<h1>CHECKOUT OUT</h1>
<h2 style="color: plum"> Wow! You're close to ordering!!</h2>
<div class="block">
    {% if list %}
    <table>
        <thead>
        <tr>
            <th>Item</th>
            <th>Price</th>
            <th>Amount</th>
        </tr>
        </thead>
        <tbody>
        {% for item in list %}
        <tr>
            <td>{{item.item.name}}</td>
            <td>${{item.item.price}}</td>
            <td>{{item.count}}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
    <p><strong>Total: </strong> ${{total}}</p>
    <h3>Choose Your Shipping Address</h3>
    {% if addresses %}
    <div class="addressContainer">
        <form action="{% url 'account:checkout' %}" method="post">
            {% csrf_token %}
            {% for address in addresses %}
            <div class="addressBlock">
                <input type="radio" name="addressChoice" value="{{address.id}}" required/>
                <br>{{address.street1}}
                <br> {{address.street2}}
                <br>{{address.postal_code}} {{address.city}}, {{address.province}}
                <br>{{address.country}}
                <br>━━━━━━━━━━✫・*。
            </div>
            {% endfor %}

    </div>
    {% endif %}
    <div>
        <a href="{% url 'account:add_address2' %}">Need to add another address?</a>
    </div>

<!--    <h3>Method of Payment</h3>-->

<!--    <div id="collapseStripe" class="wrapper">-->
<!--        <script src="https://js.stripe.com/v3/"></script>-->

<!--        <form action="." method="post" id="payment-form">-->
<!--            {% csrf_token %}-->
<!--            <div id="checkoutMethods">-->
<!--                <div style="margin: 10px;">-->
<!--                    <h4 style="color: lightseagreen">Checkout with Stripe</h4>-->
<!--                    <div class="form-row">-->
<!--                        <label for="card-element">-->
<!--                            Credit or debit card-->
<!--                        </label>-->
<!--                        <div id="card-element" class="StripeElement StripeElement&#45;&#45;empty"><div class="__PrivateStripeElement" style="margin: 0px !important; padding: 0px !important; border: none !important; display: block !important; background: transparent !important; position: relative !important; opacity: 1 !important;"><iframe frameborder="0" allowtransparency="true" scrolling="no" name="__privateStripeFrame3" allowpaymentrequest="true" src="https://js.stripe.com/v3/elements-inner-card-8a434729e4eb82355db4882974049278.html#style[base][color]=%2332325d&amp;style[base][lineHeight]=18px&amp;style[base][fontFamily]=%22Helvetica+Neue%22%2C+Helvetica%2C+sans-serif&amp;style[base][fontSmoothing]=antialiased&amp;style[base][fontSize]=16px&amp;style[base][::placeholder][color]=%23aab7c4&amp;style[invalid][color]=%23fa755a&amp;style[invalid][iconColor]=%23fa755a&amp;componentName=card&amp;wait=false&amp;rtl=false&amp;features[noop]=false&amp;origin=https%3A%2F%2Fstripe.com&amp;referrer=https%3A%2F%2Fstripe.com%2Fdocs%2Fstripe-js%2Felements%2Fquickstart&amp;controllerId=__privateStripeController0" title="Secure payment input frame" style="border: none !important; margin: 0px !important; padding: 0px !important; width: 1px !important; min-width: 100% !important; overflow: hidden !important; display: block !important; height: 18px;"></iframe><input class="__PrivateStripeElement-input" aria-hidden="true" style="border: none !important; display: block !important; position: absolute !important; height: 1px !important; top: 0px !important; left: 0px !important; padding: 0px !important; margin: 0px !important; width: 100% !important; opacity: 0 !important; background: transparent !important; pointer-events: none !important; font-size: 16px !important;"><input class="__PrivateStripeElement-safariInput" aria-hidden="true" tabindex="-1" style="border: none !important; display: block !important; position: absolute !important; height: 1px !important; top: 0px !important; left: 0px !important; padding: 0px !important; margin: 0px !important; width: 100% !important; opacity: 0 !important; background: transparent !important; pointer-events: none !important; font-size: 16px !important;"></div></div>-->

<!--                        &lt;!&ndash; Used to display form errors. &ndash;&gt;-->
<!--                        <div id="card-errors" role="alert"></div>-->
<!--                    </div>-->
<!--                    <input type="hidden" id="nonce" name="payment_method_nonce" />-->
<!--                </div>-->
<!--            </div>-->
<!--            <button>Submit Payment</button>-->
<!--        </form>-->

<!--    </div>-->

    <br>
    <input type="submit" style="color: tomato" value="PAYMENT"/>
    </form>

</div>

<!--&lt;!&ndash; script for the stripe form &ndash;&gt;-->
<!--<script src="checkout.js"></script>-->
<!--<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>-->

<!--<script>-->
<!--    var form = document.querySelector('#payment-form');-->
<!--    var client_token = '{{ client_token }}';-->

<!--    braintree.dropin.create({-->
<!--        authorization: client_token,-->
<!--        container: '#bt-dropin',-->
<!--        paypal: {-->
<!--            flow: 'vault'-->
<!--        }-->
<!--    }, function (createErr, instance) {-->
<!--        form.addEventListener('submit', function (event) {-->
<!--            event.preventDefault();-->

<!--            instance.requestPaymentMethod(function (err, payload) {-->
<!--                if (err) {-->
<!--                    console.log('Error', err);-->
<!--                    return;-->
<!--                }-->

<!--                // Add the nonce to the form and submit-->
<!--                document.querySelector('#nonce').value = payload.nonce;-->
<!--                form.submit();-->
<!--            });-->
<!--        });-->
<!--    });-->
<!--</script>-->

<!--&lt;!&ndash; script for toggling display of the form &ndash;&gt;-->
<!--<script type="text/javascript">-->
<!--    function toggleDisplay() {-->
<!--        var x = document.getElementById("collapseStripe");-->
<!--        if (x.style.display === "none") {-->
<!--            x.style.display = "block";-->
<!--        } else {-->
<!--            x.style.display = "none";-->
<!--        }-->
<!--    };-->
<!--</script>-->

{% endif %}

</div>
{% endblock %}